<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>일일 영양 정보 계산기</title>
    <style>
        body {
            font-family: 'Comic Sans MS', sans-serif;
            background-color: #f0f8ff;
            color: #333;
            text-align: center;
        }

        h1 {
            color: #ff4500;
        }

        .container {
            max-width: 600px;
            max-height: 800px;
            margin: 0 auto;
            padding: 20px;
            border: 2px solid #ccc;
            border-radius: 10px;
            background-color: #ffffff;
        }

        .result {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .gauge-container {
            position: relative;
            display: inline-block;
            width: 150px;
            height: 150px;
            padding: 0 0 30px 0;
        }

        .gauge-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, 70px);
            font-size: 16px;
            color: #333;
        }

        .button-grid button {
            background-color: #ffcc00;
            border: none;
            border-radius: 10px;
            padding: 10px;
            font-size: 16px;
            transition: background-color 0.3s;
            cursor: pointer;
        }

        .button-grid button:hover {
            background-color: #ff9900;
        }
    </style>
</head>
<body>
    <div class="button-grid">
        <button onclick="window.location.href='https://woonjang.github.io/ForHMS/'">메인으로 이동</button>
    </div>
    <div class="container">
        <h1>일일 영양 정보 계산기</h1>
        
        <!-- 성별 선택 콤보박스 추가 -->
        <p>성별을 선택하세요:</p>
        <select id="gender" onchange="calculate()">
            <option value="male">남자</option>
            <option value="female">여자</option>
        </select>

        <!-- 체중 입력 -->
        <p>체중(kg)을 입력하세요:</p>
        <input type="number" id="weight" min="0" placeholder="예: 45" oninput="calculate()" />

        <div id="result" class="result">
            <div class="gauge-container">
                <h3>일일 권장 칼로리</h3>
                <canvas id="calorieGauge"></canvas>
                <div class="gauge-label" id="calorieLabel">--</div>
            </div>
            <div class="gauge-container">
                <h3>일일 권장 탄수화물</h3>
                <canvas id="carbsGauge"></canvas>
                <div class="gauge-label" id="carbsLabel">--</div>
            </div>
            <div class="gauge-container">
                <h3>일일 권장 단백질</h3>
                <canvas id="proteinsGauge"></canvas>
                <div class의 gauges initialization 부분 및 차트 설정입니다.
            
            calorieGauge = new Chart(calorieCtx, {
                type: 'doughnut',
                data: {
                    datasets: [{
                        data: [0, 3000], 
                        backgroundColor: ['#ff4500', '#ddd'],
                    }],
                },
                options: {
                    rotation: -90, 
                    circumference: 180, 
                    cutout: '70%', 
                    tooltips: { enabled: false },
                    
                },
            });

            carbsGauge = new Chart(carbsCtx, {
                type: 'doughnut',
                data: {
                    datasets: [{
                        data: [0, 450], 
                        backgroundColor: ['#ff4500', '#ddd'],
                    }],
                },
                options: {
                    rotation: -90,
                    circumference: 180,
                    cutout: '70%',
                    tooltips: { enabled: false },
                    
                },
            });

            proteinsGauge = new Chart(proteinsCtx, {
                type: 'doughnut',
                data: {
                    datasets: [{
                        data: [0, 150], 
                        backgroundColor: ['#ff4500', '#ddd'],
                    }],
                },
                options: {
                    rotation: -90,
                    circumference: 180,
                    cutout: '70%',
                    tooltips: { enabled: false },
                    
                },
            });

            fatsGauge = new Chart(fatsCtx, {
                type: 'doughnut',
                data: {
                    datasets: [{
                        data: [0, 100], 
                        backgroundColor: ['#ff4500', '#ddd'],
                    }],
                },
                options: {
                    rotation: -90,
                    circumference: 180,
                    cutout: '70%',
                    tooltips: { enabled: false },
                    
                },
            });
        }

        function calculate() {
            const weight = document.getElementById('weight').value;
            const gender = document.getElementById('gender').value; // 선택한 성별

            if (!weight || weight <= 0) {
                alert("올바른 체중을 입력하세요.");
                return;
            }

            let dailyCalories;
            if (gender === 'male') {
                dailyCalories = weight * 1.0 * 24; // 남성의 일일 권장 칼로리
                const carbs = Math.round(dailyCalories * 0.6 / 4); /* 탄수화물 */
                const proteins = Math.round(dailyCalories * 0.2 / 4); /* 단백질 */
                const fats = Math.round(dailyCalories * 0.2 / 9); /* 지방 */; 
            } else {
                dailyCalories = weight * 0.9 * 24; // 여성의 일일 권장 칼로리
                const carbs = Math.round(dailyCalories * 0.6 / 4); /* 탄수화물 */
            const proteins = Math.round(dailyCalories * 0.2 / 4); /* 단백질 */
            const fats = Math.round(dailyCalories * 0.2 / 9); /* 지방 */
            }

            const carbs = Math.round(dailyCalories * 0.6 / 4); 
            const proteins = Math.round(dailyCalories * 0.2 / 4); 
            const fats = Math.round(dailyCalories * 0.2 / 9); 

            updateGauge(calorieGauge, dailyCalories, 3000, 'calorieLabel', dailyCalories + ' kcal');
            updateGauge(carbsGauge, carbs, 450, 'carbsLabel', carbs + ' g');
            updateGauge(proteinsGauge, proteins, 150, 'proteinsLabel', proteins + ' g');
            updateGauge(fatsGauge, fats, 100, 'fatsLabel', fats + ' g');
        }

        function updateGauge(chart, value, max, labelId, labelText) {
            chart.data.datasets[0].data = [value, max - value];
            chart.update(); 
            document.getElementById(labelId).innerText = labelText;
        }

        initGauges(); 
    </script>
</body>
</html>
